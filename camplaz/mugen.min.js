/*
  Mini UnGame ENgine (MUGEN) ver 0.14
  Copyright 2019 Brian James

  Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
*/
var MUGEN=function(){var u,c,e="titleScreenImageURL",a="heroSpeed",r="monsterSpeed",t="timeBetweenMonsters",d="jumpHeight",l="attackDuration",n="heroHitRadius",h="attackRadius",m="monsterMoveToX",p="maxSimultaneousMonsters",f="monsterHitRadius",o="pointsPerMonsterKilled",i="onGameStart",g="onMonsterSpawn",s="onMonsterWasHit",y="onHeroWalk",v="onHeroAttack",L="onHeroJump",w="makeResponsive",x="autoPlay",W=[e,a,r,t,d,l,h,n,m,p,f,o,i,g,s,v,y,L,w,x],b={titleScreenImageURL:null,heroSpeed:220,monsterSpeed:450,timeBetweenMonsters:2600,jumpHeight:145,attackDuration:600,heroHitRadius:50,attackRadius:50,monsterMoveToX:null,maxSimultaneousMonsters:10,monsterHitRadius:50,pointsPerMonsterKilled:1,onGameStart:null,onMonsterSpawn:null,onMonsterWasHit:null,onHeroAttack:null,onHeroWalk:null,onHeroJump:null,makeResponsive:!1,autoPlay:!1},C={},E=0,R="",S=0,T=atob("TWFkZSB3aXRoIE1VR0VO"),H=atob("aHR0cHM6Ly9naXRodWIuY29tL21hbGxvYy1lcnJvci9tdWdlbi1kaXN0cmlidXRpb24="),M=atob("X2JsYW5r"),k={"font-family":"Helvetica, Arial, sans-serif","font-size":"14px",color:"white","z-index":"9999",position:"absolute",bottom:"4px",right:"8px","text-shadow":"0 0 5px rgba(0,0,0,0.4)","text-decoration":"none",padding:"8px"},B=null,F=null,P=null,V=null,q=document.querySelector("body"),A=document.querySelector(".instructions"),N=null,X="titleScreen",z="hero",G="walking",I="left",Y="idling",j="jumping",J="attacking",U="monster",K="preload-image",D="was-hit",O=!1,Z=null;this.MUGEN=function(){},this.initialize=function(t){et(t),St(),C[x]||(Tt(),A.classList.add("show")),at(),_(),$(),Rt(),Q(),null!==C[e]?lt():nt()};var Q=function(){var t=kt();t.classList.add(U,D),t.style.visibility="hidden",q.appendChild(t),(R=window.getComputedStyle(t).getPropertyValue("transition")).split(",").forEach(function(t){var e=(t=t.trim()).split(" "),n=1e3*parseFloat(e[1]);S+=n;var l=1e3*parseFloat(e[3]);S+=l}),t.remove()},$=function(){u=P.clientWidth,c=P.clientHeight,C[w]&&rt()},_=function(){(P=kt()).classList.add("background"),q.appendChild(P),q.style.width=P.clientWidth+"px",q.style.height=P.clientHeight+"px",(V=kt()).classList.add(z,Y),q.appendChild(V),(N=kt()).classList.add("score"),q.appendChild(N),tt()},tt=function(){(B=Bt()).innerHTML=T,B.href=H,B.target=M,Ft(B,k),q.appendChild(B)},et=function(t){for(var e=0;e<W.length;e++){var n=W[e];C[n]=b[n]}void 0!==t&&ct(t),Ht()},nt=function(){setInterval(Lt,C[t]),C[x]&&vt(),null!==C[i]&&setTimeout(C[i],0),window.requestAnimationFrame(it)},lt=function(){var t={position:"absolute",top:"0",left:"0",width:"100%",height:"100%","background-image":"url('"+C[e]+"')","background-size":"contain","background-repeat":"no-repeat","background-color":"black",opacity:"1",transition:"opacity 500ms ease-in-out","z-index":"9999"};(F=kt()).classList.add(X),Ft(F,t),q.appendChild(F)},it=function(){var t=document.querySelectorAll("."+U),e=ot(t);st(e),window.requestAnimationFrame(it)},ot=function(t){var e=V.getBoundingClientRect(),i=q.getBoundingClientRect(),o=e.left+V.scrollLeft-(i.left+q.scrollLeft)+.5*e.width,s=e.top+V.scrollTop-(i.top+q.scrollTop)+.5*e.height,a=[],n=q.clientWidth/u,c=C[f]*n,r=C[h]*n;return null!==t&&t.forEach(function(t){var e=t.getBoundingClientRect(),n=e.left+t.scrollLeft-(i.left+q.scrollLeft)+.5*e.width,l=e.top+t.scrollTop-(i.top+q.scrollTop)+.5*e.height;Math.sqrt(Math.pow(o-n,2)+Math.pow(s-l,2))<=c+r&&V.classList.contains(J)&&(o<n&&!V.classList.contains(I)||n<o&&V.classList.contains(I))&&a.push(t)}),a},st=function(t){var i=q.clientWidth<u;t.forEach(function(t){if(!t.classList.contains(D)){var e=window.getComputedStyle(t).getPropertyValue("transition");if(t.classList.add(D),t.style.transition=e+", "+R,i){console.log("resized hit");window.getComputedStyle(t);t.style.width=null,t.style.height=null,t.style.bottom=null,t.style.top=null;var n=q.clientWidth/u;t.style.width=t.clientWidth*n+"px",t.style.height=t.clientHeight*n+"px";var l=parseFloat(window.getComputedStyle(t).getPropertyValue("bottom"));t.style.bottom=l*n+"px",t.style.top="auto",t.style.left="auto"}t.style.right=window.getComputedStyle(t).getPropertyValue("right"),setTimeout(function(){t.remove()},S),0,null!==C[s]&&setTimeout(C[s],0),Et(C[o])}})},at=function(){var t=kt();t.classList.add(K,z,Y),q.appendChild(t);var e=kt();e.classList.add(K,z,G),q.appendChild(e);var n=kt();n.classList.add(K,z,j),q.appendChild(n);var l=kt();l.classList.add(K,z,J),q.appendChild(l)},ct=function(t){for(var e=0;e<W.length;e++){var n=W[e];void 0!==t[n]&&(C[n]=t[n])}},rt=function(){var t=u/c,e=u,n=u;if(document.documentElement.clientWidth<u&&(e=document.documentElement.clientWidth),document.documentElement.clientHeight<c&&(n=document.documentElement.clientHeight*t),e<u||n<u){var l=e<n?e:n,i=l/t,o=l/u;q.style.width=l+"px",q.style.height=i+"px",P.style.width=l+"px",P.style.height=i+"px",V.style.width=null,V.style.height=null,V.style.bottom=null,V.style.top=null,V.style.left=null,V.style.right=null,V.style.width=V.clientWidth*o+"px",V.style.height=V.clientHeight*o+"px";var s=parseFloat(window.getComputedStyle(V).getPropertyValue("bottom"));V.style.bottom=s*o+"px",V.style.top="auto",V.style.right="auto",V.style.left=parseFloat(window.getComputedStyle(V).getPropertyValue("left"))*o+"px",null!==(a=document.querySelectorAll("."+U))&&a.forEach(function(t){t.style.width=null,t.style.height=null,t.style.bottom=null,t.style.top=null,t.style.width=t.clientWidth*o+"px",t.style.height=t.clientHeight*o+"px";var e=parseFloat(window.getComputedStyle(t).getPropertyValue("bottom"));t.style.bottom=e*o+"px",t.style.top="auto"})}else{var a;P.style.width=null,P.style.height=null,q.style.width=P.clientWidth+"px",q.style.height=P.clientHeight+"px",V.style.width=null,V.style.height=null,V.style.bottom=null,V.style.top=null,V.style.left=null,(V.style.right=null)!==(a=document.querySelectorAll("."+U))&&a.forEach(function(t){t.style.width=null,t.style.height=null,t.style.bottom=null,t.style.top=null})}},ut=function(t){t>V.offsetLeft?(V.className="",yt(V),V.classList.add(z,G)):(V.className="",yt(V),V.classList.add(z,G,I));var e=Math.abs(t-V.offsetLeft),n=C[a];document.documentElement.clientWidth<u&&(n*=document.documentElement.clientWidth/u);var l=e/n*1e3;V.style["transition-duration"]=l+"ms",V.style.left=t+"px",clearTimeout(Z),Z=setTimeout(function(){gt(),C[x]&&vt()},l),null!==C[y]&&setTimeout(C[y],0)},dt=function(t){clearTimeout(Z),V.style["transition-duration"]="0ms";var e=V.getBoundingClientRect().left+V.scrollLeft-(q.getBoundingClientRect().left+q.scrollLeft);V.style.left=e+"px",ht();var n=C[d],l=C[a];document.documentElement.clientWidth<u&&(n*=document.documentElement.clientWidth/u,l*=document.documentElement.clientWidth/u);var i=n/l*1e3/2;V.style["transition-duration"]=i+"ms";var o="";Math.abs(t-e)>.3*V.clientWidth&&(t<e?(o="left",V.classList.add(I)):o="right");var s=50;document.documentElement.clientWidth<u&&(s*=document.documentElement.clientWidth/u),"left"===o?V.style.left=e-s+"px":"right"===o&&(V.style.left=e+s+"px"),V.style["margin-bottom"]=n+"px",setTimeout(function(t){V.style["margin-bottom"]=0,"left"===t?V.style.left=e-2*s+"px":"right"===t&&(V.style.left=e+2*s+"px"),V.classList.contains(J)||(Z=setTimeout(function(){gt(),C[x]&&vt()},i))},i,o),null!==C[L]&&setTimeout(C[L],0)},ht=function(){V.classList.remove(z),V.classList.remove(G),V.classList.remove(Y),yt(V),V.classList.add(z,j)},mt=function(t){clearTimeout(Z);var e=V.classList.contains(j),n=V.getBoundingClientRect().left+V.scrollLeft-(q.getBoundingClientRect().left+q.scrollLeft);e||(V.style["transition-duration"]="0ms",ft(),V.style.left=n+"px"),pt(),t<n+.5*V.clientWidth?V.classList.add(I):V.classList.remove(I),Z=setTimeout(function(){gt(),C[x]&&vt()},C[l]),null!==C[v]&&setTimeout(C[v],0)},pt=function(){V.className="",yt(V),V.classList.add(z,J)},ft=function(){V.className="",yt(V),V.classList.add(z,Y)},gt=function(){ft()},yt=function(t){t.style.animaton="none",t.offsetHeight,t.style.animation=""},vt=function(){var t=Math.random();if(t<.1)gt(),setTimeout(function(){vt()},1e3);else if((t=Math.random())<.5){var e=.5*V.clientWidth,n=e+Math.round(Math.random()*(q.clientWidth-2*e));ut(n)}else if(t<.75){var l=Math.random(),i=V.getBoundingClientRect().left+V.scrollLeft;dt(l<.33?i-300:l<.66?i:i+300)}else mt(.5*q.clientWidth)},Lt=function(){if(!(document.querySelectorAll("."+U).length>=C[p])){var t=kt();t.classList.add(U),q.appendChild(t);var e,n=window.getComputedStyle(t),l=-50-t.clientWidth;if(t.style.right=l+"px",q.clientWidth<u){var i=q.clientWidth/u;t.style.width=t.clientWidth*i+"px",t.style.height=t.clientHeight*i+"px",t.style.top="auto";var o=parseFloat(n.getPropertyValue("bottom"));t.style.bottom=o*i+"px"}e=null===C[m]||isNaN(parseFloat(C[m]))?q.clientWidth+t.clientWidth+10:C[m]*document.documentElement.clientWidth/u;var s=Math.abs(l-e),a=C[r];document.documentElement.clientWidth<u&&(a*=document.documentElement.clientWidth/u);var c=s/a*1e3;t.style.transition="right "+c+"ms linear",t.style.right=e+"px",null===C[m]&&setTimeout(function(){t.remove()},c),null!==C[g]&&setTimeout(C[g],0)}},wt=function(t,e,n,l){if(t.classList.contains(X))F.style.opacity="0",F.style["pointer-events"]="none",setTimeout(function(){F.remove(),nt()},510);else if(A.classList.remove("show"),t.classList.contains(U));else if(l)V.classList.contains(J)||mt(e);else if(!V.classList.contains(j)&&!V.classList.contains(J)){var i=e-.5*V.clientWidth;n>=V.offsetTop?ut(i):dt(i)}},xt=function(t){O||(q.removeEventListener("touchstart",Wt),O=!0);var e=t.clientX-(t.target.getBoundingClientRect().left+q.scrollLeft),n=t.clientY-(t.target.getBoundingClientRect().top+q.scrollTop),l=t.shiftKey;return wt(t.target,e,n,l),!1},Wt=function(t){O||(q.removeEventListener("mousedown",xt),O=!0);var e=t.touches[0].clientX-(t.target.getBoundingClientRect().left+q.scrollLeft),n=t.touches[0].clientY-(t.target.getBoundingClientRect().top+q.scrollTop),l=1<t.touches.length;return wt(t.target,e,n,l),!1},bt=function(t){},Ct=function(t){C[w]&&rt()},Et=function(t){E+=t,Rt()},Rt=function(){N.textContent=E},St=function(){window.addEventListener("resize",Ct)},Tt=function(){document.addEventListener("keydown",bt),q.addEventListener("mousedown",xt),q.addEventListener("touchstart",Wt)},Ht=function(){[i,g,s,v,L,y].forEach(function(t){null===C[t]||Mt(C[t])||(C[t]=null,console.log("**ERROR: The variable you set for "+t+" is not a function"))})},Mt=function(t){return t&&"[object Function]"==={}.toString.call(t)},kt=function(){return document.createElement("div")},Bt=function(){return document.createElement("a")},Ft=function(t,e){for(var n in e)t.style[n]=e[n]}};